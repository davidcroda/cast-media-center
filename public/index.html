<!DOCTYPE html>
<html>
<head>
    <title></title>
    <link rel="stylesheet" href="components/bootstrap/dist/css/bootstrap.css" />
    <link rel="stylesheet" href="css/styles.css" />
    <script data-main="main" src="components/requirejs/require.js"></script>
</head>
<body>
    <div style="display:none">
        <script type="text/template" id="source_template">
            <form>
                <fieldset>
                    <label for="path">
                        <span>Path</span>
                        <input type="text" placeholder="/home/media/" class="form-control" name="path" id="path" />
                    </label>
                    <label for="baseUrl">
                        <span>Base URL</span>
                        <input type="text" placeholder="http://localhost/media" class="form-control" name="baseUrl" id="baseUrl" />
                    </label>
                    <label for="type">
                        <span>Type</span>
                        <select id="type" name="type" class="form-control">
                            <option value="local">Local</option>
                        </select>
                    </label>
                    <input type="submit">
                </fieldset>
            </form>
            <table class="table">
                <% sources.forEach(function(source) { %>
                <tr>
                    <td><%- source.get('path') %></td>
                    <td><%- source.get('urlBase') %></td>
                    <td><%- source.get('type') %></td>
                </tr>
                <% }); %>
            </table>
        </script>
        <script type="text/template" id="video_template">
            <div class="row" id="video-container">
                <% videos.forEach(function(video) {
                    var canPlay = (video.get('vcodec') == 'h264' && video.get('acodec') == 'aac');
                    var videoClass = (video.get('transcoding'))?"transcoding":"";
                %>
                    <div class="video col-md-3 <%- videoClass %>" data-id="<%= video.id %>">
                        <img class="img-thumbnail" src="<%- video.get('thumbnailSmall') %>" />
                        <div class="overlay"></div>
                        <% if(canPlay) { %>
                            <div class="icon play-icon"><i class="glyphicon glyphicon-play-circle"></i></div>
                        <% } else { %>
                            <div class="icon transcode-icon"><i class="glyphicon glyphicon-wrench"></i></div>
                        <% } %>
                        <div class="icon delete-icon"><i class="glyphicon glyphicon-trash"></i></div>
                        <div class="video-title">
                            <%- video.get('title') %><br />
                            <div class='created'><%= video.get('date') %></div>
                            <div class='vcodec'>Video: <b><%= video.get('vcodec') %></b></div>
                            <div class='acodec'>Audio: <b><%= video.get('acodec') %></b></div>
                        </div>
                    </div>
                <% }); %>
            </div>
        </script>
        <script type="text/template" id="video_nav">
            <div class="video-nav">
                <select>
                    <option value="">Sort</option>
                    <% sorts.forEach(function(sort) {
                    console.log(current, sort);
                        sort.selected = (current == sort.value)?"selected=selected":"";
                    %>
                    <option value="<%- sort.value %>" <%- sort.selected %>><%- sort.title %></option>
                    <% }); %>
                </select>
            </div>
        </script>
    </div>
    <div class="container-fluid">
        <nav role="navigation" class="navbar navbar-default">
            <div class="container-fluid">
                <div class="navbar-header">
                    <button data-toggle="collapse" data-target="#navbar-collapse" type="button" class="navbar-toggle"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="#" class="navbar-brand">freeCast</a>
                </div>
                <div id="navbar-collapse" class="collapse navbar-collapse">
                    <ul class="nav navbar-nav">
                        <li class="active"><a href="#">Home</a></li>
                        <li><a href="#sources">Sources</a></li>
                        <li><a href="/refresh">Refresh</a></li>
                    </ul>
                    <form role="search" class="navbar-form navbar-left">
                        <div class="form-group">
                            <input id="search" type="text" placeholder="Search" class="form-control">
                        </div>
                    </form>
                </div>
            </div>
        </nav>
        <div id="content"></div>
        <nav id="control-nav" role="navigation" style="display:none;" class="navbar navbar-default navbar-fixed-bottom">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-md-1">
                        <div class="controls padded"><a id="play" class="glyphicon glyphicon-play disabled"></a><a id="stop" class="glyphicon glyphicon-stop disabled"></a></div>
                    </div>
                    <div class="col-md-3">
                        <div class="current-media">No video loaded</div><img class="thumbnail">
                        <div class="currentTime"></div>
                    </div>
                    <div class="col-md-8">
                        <div class="padded">
                            <div class="progress progress-striped">
                                <div id="progress" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" class="progress-bar"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </nav>
    </div>
</body>
</html>